---
- name: Set Language Root Fact
  ansible.builtin.set_fact:
    language_root: "{{ ansible_facts['user_dir'] }}/ansible_langs"

- name: Golang packages
  block:
    - name: Set Golang Facts
      ansible.builtin.set_fact:
        go_root: "{{ language_root }}/golang/current"  
  
    - name: Install Golang Packages
      include_tasks: golang.yaml
      loop:
        - repo: golang.org/x/tools/gopls@latest
          binary: gopls
        - repo: golang.org/x/tools/cmd/goimports@latest
          binary: goimports


- name: Cargo Packages
  block:
    - name: Set Cargo Home Fact
      ansible.builtin.set_fact:
        cargo_home: "{{ language_root }}/rust/cargo"
        rustup_home: "{{ language_root }}/rust/rustup"

    - name: Install Cargo Packages
      include_tasks: rust.yaml
      loop: 
        - repo: https://github.com/jhamill34/jj-spr.git
          rev: c001ed0e38fc7a706e85e007aa0b085f8ee47b68

- name: Python Packages
  block:
    - name: Install Pipx
      ansible.builtin.pip:
        name: pipx
        state: present

    - name: Install Posting 
      community.general.pipx:
        name: posting 
        state: present 

